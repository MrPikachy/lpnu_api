{
  "openapi": "3.0.3",
  "info": {
    "title": "lpnu_api",
    "version": "0.1.0",
    "description": "API для отримання розкладу зі студентського сайту ЛНУ. Публічний spec, потрібен для allowlist на PythonAnywhere."
  },
  "servers": [
    {
      "url": "https://lpnu-api-py6o.onrender.com"
    }
  ],
  "paths": {
    "/api/schedule": {
      "get": {
        "summary": "Отримати розклад групи",
        "description": "Повертає масив елементів розкладу для вказаної групи (semester=1).",
        "parameters": [
          {
            "name": "group",
            "in": "query",
            "description": "Назва групи (наприклад: ІП-21)",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Успішна відповідь — список зайнять",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ScheduleItem"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Помилка клієнта (відсутній параметр)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "502": {
            "description": "LPNU site unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "Внутрішня помилка сервера",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ScheduleItem": {
        "type": "object",
        "properties": {
          "weekday": { "type": "string", "example": "Понеділок" },
          "start_time": { "type": "string", "example": "08:30" },
          "end_time": { "type": "string", "example": "10:05" },
          "subject": { "type": "string", "example": "Математика" },
          "subject_type": { "type": "string", "example": "Лекція" },
          "location": { "type": "string", "example": "н.к., ауд. 101" },
          "subgroup": { "type": "integer", "example": 0 },
          "week_type": { "type": "string", "example": "обидва" }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "error": { "type": "string", "example": "Missing 'group' parameter" }
        }
      }
    }
  }
}